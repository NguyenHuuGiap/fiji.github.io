<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
  <head>
    <title>Bug 906 &ndash; java################### left in /tmp    (Suse Linux 13.1)</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<link rel="Top" href="">

  


  
    
      

      
      



    
    <link href="../css/global.css"
          rel="alternate stylesheet" 
          title="Classic"><link href="../css/global.css" rel="stylesheet"
        type="text/css" ><link href="../css/bug.css" rel="stylesheet"
        type="text/css" >

    <link href="../css/dusk.css" rel="stylesheet"
        type="text/css" title="Dusk">

    

    

    


    


    

    
    
    
  </head>



  <body onload=""
        class=" bz_bug bz_status_NEEDSINFO bz_product_Fiji bz_component_Plugins bz_bug_906 yui-skin-sam">



<div id="header">
<div id="banner">
  </div>

<table border="0" cellspacing="0" cellpadding="0" id="titles">
<tr>
    <td id="title">
      <p>Bugzilla &ndash; Bug&nbsp;906</p>
    </td>

    <td id="subtitle">
      <p class="subheader">java################### left in /tmp    (Suse Linux 13.1)</p>
    </td>

    <td id="information">
      <p class="header_addl_info">Last modified: 2015-02-12 06:37:50 CST</p>
    </td>
</tr>
</table>


</div> 

<div id="notice">
  <table>
    <tr>
      <td style="font-size: 72px; color: firebrick; padding: 0 10px 0 10px">&#9888;</td>
      <td>
        <p style="margin: 0.4em">
        NOTICE! This is a static HTML version of a legacy Fiji BugZilla bug.
        </p>
        <p style="margin: 0.4em">
        The Fiji project now
        <a href="https://imagej.net/Issues">uses GitHub Issues</a> for issue tracking.
        </p>
        <p style="margin: 0.4em">
        Please
        <a href="https://github.com/fiji/fiji/issues/new">file all new issues</a>
        there.
        </p>
      </td>
    </tr>
  </table>
</div>

<div id="bugzilla-body">


<div class="bz_alias_short_desc_container edit_form">
     <a href="906.html"><b>Bug&nbsp;906</b></a> -<span id="summary_alias_container" class="bz_default_hidden"> 
      <span id="short_desc_nonedit_display">java################### left in /tmp    (Suse Linux 13.1)</span>
     </span>
  
       
    <div id="summary_alias_input">
      <table id="summary"> 
        <tr>
            <td colspan="2">
          </td>
        </tr>
        
        <tr><th class="field_label "
    id="field_label_short_desc">

    <label for="short_desc" accesskey="s">

  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
  >Summary:</a>
</label>
</th>
          <td>java################### left in /tmp    (Suse Linux 13.1)
          </td>
        </tr>
      </table>
    </div>
  </div>
  
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a>Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">NEEDSINFO
      </span>
    </td>
  </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components."
      class="field_help_link"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >Fiji</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Unclassified</td>
    </tr>
        
    
    
    <tr><th class="field_label "
    id="field_label_component">


  <a 
      title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list."
      class="field_help_link"
  >Component:</a>

</th>
  <td class="field_value "
      id="field_container_component" >Plugins</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_version">

    <label for="version">

  <a 
      title="The version field defines the version of the software the bug was found in."
      class="field_help_link"
  >Version:</a>
</label>
</th>
        <td>unspecified
  </td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">

    <label for="rep_platform" accesskey="h">

  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
  >Hardware:</a>
</label>
</th>
      <td class="field_value">PC
       Linux
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label for="priority" accesskey="i">
          <a><u>I</u>mportance</a></label>:
      </th>
      <td>P4
       normal
      </td>
    </tr>            
          
          <tr>
      <th class="field_label">
        <a>Assigned To</a>:
      </th>
      <td><span class="vcard"><span class="fn">ImageJ Bugs Mailing List</span>
</span>
      </td>
    </tr>

    
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">

    <label for="bug_file_loc" accesskey="u">

  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
  >URL:</a>
</label>
</th>
    <td>
      <span id="bz_url_input_area">
      </span>
    </td>
  </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>
    
  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>
    
  </td>
  </tr>
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table cellpadding="3" cellspacing="1">
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2014-08-18 04:53 CDT by <span class="vcard"><span class="fn">Aryeh Weiss</span>
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2015-02-12 06:37 CST 
    </td>
  
  </tr>
         <tr>
      <th class="field_label">
        <label for="newcc" accesskey="a">CC List:</label>
      </th>
      <td>5 
          users
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5">
                <option value="aryeh">aryeh</option>
                <option value="ctrueden">ctrueden</option>
                <option value="hinerm">hinerm</option>
                <option value="johannes.schindelin">johannes.schindelin</option>
                <option value="mone7979">mone7979</option>
            </select>
        </div>
          
      </td>
    </tr>
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" ></td>
    </tr> 
         
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
         
                

        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts" cellspacing="0" cellpadding="0"><tr>
  <td>

    


<br>
<table id="attachment_table" cellspacing="0" cellpadding="4">
  <tr id="a0">
    <th colspan="2" align="left">
      Attachments
    </th>
  </tr>


      <tr id="a1" class="bz_contenttype_text_plain">
        <td valign="top">
            <a href="../attach/201/Exception140818.txt"
               title="View the content of the attachment">
          <b>full text of exception</b></a>

          <span class="bz_attach_extra_info">
              (70.99 KB,
                text/plain)

            <br>
            <a href="#attach_201"
               title="Go to the comment associated with the attachment">2014-08-18 05:10 CDT</a>,

            <span class="vcard"><span class="fn">Aryeh Weiss</span>
</span>
          </span>
        </td>


        <td valign="top">
        </td>
      </tr>
      <tr id="a2" class="bz_contenttype_text_plain">
        <td valign="top">
            <a href="../attach/202/victoriaFirstMacro_v5.ijm"
               title="View the content of the attachment">
          <b>macro which I was running</b></a>

          <span class="bz_attach_extra_info">
              (14.21 KB,
                text/plain)

            <br>
            <a href="#attach_202"
               title="Go to the comment associated with the attachment">2014-08-18 05:12 CDT</a>,

            <span class="vcard"><span class="fn">Aryeh Weiss</span>
</span>
          </span>
        </td>


        <td valign="top">
        </td>
      </tr>
      <tr id="a3" class="bz_contenttype_text_plain bz_tr_obsolete bz_default_hidden">
        <td valign="top">
            <a href="../attach/229/file_906.txt"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">Minimal example for error reproduction. Contains deconv.ijm macro and an image directory.</span></b></a>

          <span class="bz_attach_extra_info">
              (89 bytes,
                text/plain)

            <br>
            <a href="#attach_229"
               title="Go to the comment associated with the attachment">2015-02-03 05:46 CST</a>,

            <span class="vcard">mone7979
</span>
          </span>
        </td>


        <td valign="top">
        </td>
      </tr>
      <tr id="a4" class="bz_contenttype_application_zip">
        <td valign="top">
            <a href="../attach/234/deconv.zip"
               title="View the content of the attachment">
          <b>Minimal example for error reproduction. Contains deconv.ijm macro and an image directory.</b></a>

          <span class="bz_attach_extra_info">
              (1.05 MB,
                application/zip)

            <br>
            <a href="#attach_234"
               title="Go to the comment associated with the attachment">2015-02-11 15:04 CST</a>,

            <span class="vcard">mone7979
</span>
          </span>
        </td>


        <td valign="top">
        </td>
      </tr>

  <tr class="bz_attach_footer">
    <td colspan="2">
        <span class="bz_attach_view_hide">
            <a href="#a0" onclick="return toggle_display(this);">Show
              Obsolete</a> (1)
        </span>
        <a href="attachment.cgi?bugid=906&amp;action=enter">Add an attachment</a>
        (proposed patch, testcase, etc.)
    </td>
  </tr>
</table>
<br>

  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments">






<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table" cellpadding="0" cellspacing="0"><tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Weiss</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-08-18 04:53:43 CDT
        </span>
      </div>



<pre class="bz_comment_text" >After runing Fiji, directories of the form /tmp/java########## are left.
(For example: java6906629474009672505/ )
These directories appear to be related to plugins called form one of my scripts.
They do not go away when I exit Fiji,and if I run the same script after exiting and restarting Fiji,
I will see a second set of such directories (with different numbers).

This apparently filled my /tmp directory, causing Fiji to fail to start. After I removed them, Fij i functioned properly. 

Is this a bug in Fiji, in Java, or due to a  mistake on my part?

Information about your version of Java:

  os.arch =&gt; amd64
  os.name =&gt; Linux
  os.version =&gt; 3.11.10-11-desktop
  java.version =&gt; 1.6.0_24
  java.vendor =&gt; Sun Microsystems Inc.
  java.runtime.name =&gt; Java(TM) SE Runtime Environment
  java.runtime.version =&gt; 1.6.0_24-b07
  java.vm.name =&gt; Java HotSpot(TM) 64-Bit Server VM
  java.vm.version =&gt; 19.1-b02
  java.vm.vendor =&gt; Sun Microsystems Inc.
  java.vm.info =&gt; mixed mode
  java.awt.graphicsenv =&gt; sun.awt.X11GraphicsEnvironment
  java.specification.name =&gt; Java Platform API Specification
  java.specification.version =&gt; 1.6
  sun.cpu.endian =&gt; little
  sun.desktop =&gt; null
  file.separator =&gt; /

The up-to-date check says: REMIND_LATER

Information relevant to JAVA_HOME related problems:

  JAVA_HOME is set to: /home/victoria/Desktop/Fiji.app/java/linux-amd64/jdk1.6.0_24//jre
  imagej.dir =&gt; /home/victoria/Desktop/Fiji.app

Information about the version of each plugin:

Activated update sites:
ImageJ: <a href="http://update.imagej.net/">http://update.imagej.net/</a> (last check:20140814190445)
Fiji: <a href="http://fiji.sc/update/">http://fiji.sc/update/</a> (last check:20140813215223)
3D ImageJ Suite: <a href="http://sites.imagej.net/Tboudier/">http://sites.imagej.net/Tboudier/</a> (last check:20140604090506)
BioVoxxel: <a href="http://sites.imagej.net/BioVoxxel/">http://sites.imagej.net/BioVoxxel/</a> (last check:20140811153030)
Cookbook: <a href="http://sites.imagej.net/Cookbook/">http://sites.imagej.net/Cookbook/</a> (last check:20131221011857)
CMCI-EMBL: <a href="http://sites.imagej.net/Miura/">http://sites.imagej.net/Miura/</a> (last check:20140718170940)
Morphology: <a href="http://sites.imagej.net/Landini/">http://sites.imagej.net/Landini/</a> (last check:20140723175558)
ScientiFig: <a href="http://sites.imagej.net/Aigouy/">http://sites.imagej.net/Aigouy/</a> (last check:20140812182844)

Files not up-to-date:
  2e7b86b4 (MODIFIED) 20140818122636 jars/ij-1.49b.jar
  5bff40de (LOCAL_ONLY) 20140629110456 plugins/Utilities/Grid_.class
  00501934 (LOCAL_ONLY) 20120410223928 plugins/ij-plugins_toolkit.jar</pre>
    </div><div id="c1" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Weiss</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-08-18 05:10:55 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class=""><a href="../attach/201/Exception140818.txt" name="attach_201" title="full text of exception">attachment 201</a></span>
full text of exception</pre>
    </div><div id="c2" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Weiss</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-08-18 05:12:56 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class=""><a href="../attach/202/victoriaFirstMacro_v5.ijm" name="attach_202" title="macro which I was running">attachment 202</a></span>
macro which I was running</pre>
    </div><div id="c3" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Weiss</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-08-18 05:16:06 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Additional note: every time I run the script, a new set of such directories is created. Each appears to contain a plugin which I am using in the script.
Each time I run the script, three such directories are created.

We just noticed also the when this script starts, we get the following exception:

(Fiji Is Just) ImageJ 2.0.0-rc-13/1.49f7; Java 1.6.0_24 [64-bit]; Linux 3.11.10-11-desktop; 119MB of 4625MB (2%)
 
java.lang.StackOverflowError
	at net.imagej.legacy.LegacyOutputTracker.getTracker(LegacyOutputTracker.java:166)
	at net.imagej.legacy.LegacyOutputTracker.removeOutput(LegacyOutputTracker.java:99)
	at net.imagej.legacy.DefaultLegacyHooks.unregisterImage(DefaultLegacyHooks.java:187)
	at ij.gui.ImageWindow.close(ImageWindow.java)
	at ij.gui.StackWindow.close(StackWindow.java:182)
	at ...

I attached the full exception text and the macro. I note that after receiving the exception, the macro appears to function correctly.</pre>
    </div><div id="c4" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Weiss</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-08-18 05:22:32 CDT
        </span>
      </div>



<pre class="bz_comment_text" >More information:

This error occurs when I do:

run(&quot;Close All&quot;);

this also happen when I run it from the menu.</pre>
    </div><div id="c5" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Weiss</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-08-18 05:27:07 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Something else (sorry , I did not expect it).

When I try to manually close the images, most of them close , but two of them 
fail, and generate the exception:

(Fiji Is Just) ImageJ 2.0.0-rc-13/1.49f7; Java 1.6.0_24 [64-bit]; Linux 3.11.10-11-desktop; 89MB of 4625MB (1%)
 
java.lang.StackOverflowError
	at net.imagej.legacy.Utils.findLegacyThreadGroup(Utils.java:56)
	at net.imagej.legacy.LegacyOutputTracker.getTracker(LegacyOutputTracker.java:166)
	at net.imagej.legacy.LegacyOutputTracker.removeOutput(LegacyOutputTracker.java:99)
	at net.imagej.legacy.DefaultLegacyHooks.unregisterImage(DefaultLegacyHooks.java:187)
	at ij.gui.ImageWindow.close(ImageWindow.java)
	at ij.gui.StackWindow.close(StackWindow.java:182)

etc.</pre>
    </div><div id="c6" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Curtis Rueden</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-08-18 16:21:27 CDT
        </span>
      </div>



<pre class="bz_comment_text" >The StackOverflowError messages are a symptom of a different bug, which I fixed yesterday:
<a href="https://github.com/imagej/imagej-legacy/commit/2729b90ed8b1e0ab349172f6b0d641c8d3572a9e">https://github.com/imagej/imagej-legacy/commit/2729b90ed8b1e0ab349172f6b0d641c8d3572a9e</a>

That fix is being released and uploaded as I write this. But I will leave this issue open since it is primarily about the proliferation of temporary directories.</pre>
    </div><div id="c7" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Weiss</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-08-18 21:44:45 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Thank you. 
Why did it only fail for some images, and not for most of them?</pre>
    </div><div id="c8" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c8">Comment 8</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Curtis Rueden</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-08-19 08:32:06 CDT
        </span>
      </div>



<pre class="bz_comment_text" >I did not duplicate the exact circumstance you had with the StackOverflowError (I saw the error in a slightly different situation, after some code changes locally). So I cannot be certain why it only happens for some images. But if I had to speculate, I'd say maybe a race condition (multiple threads modifying data structures at the same time).

In any case, please let me know if you still see StackOverflowErrors after updating, while the &quot;Enable ImageJ2 data structures&quot; option is OFF (which it is by default now).</pre>
    </div><div id="c9" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c9">Comment 9</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Schindelin</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-08-19 12:14:25 CDT
        </span>
      </div>



<pre class="bz_comment_text" >I fear that this code is not called: <a href="https://github.com/scijava/scripting-java/blob/1c965a106eed858523d0e8c0ec663fab4caaa628/src/main/java/org/scijava/plugins/scripting/java/JavaEngine.java#L329-L342">https://github.com/scijava/scripting-java/blob/1c965a106eed858523d0e8c0ec663fab4caaa628/src/main/java/org/scijava/plugins/scripting/java/JavaEngine.java#L329-L342</a> (it is supposed to clean up the temporary directory after use)</pre>
    </div><div id="c10" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c10">Comment 10</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Weiss</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-08-20 21:39:26 CDT
        </span>
      </div>



<pre class="bz_comment_text" >I did not see that stack overflow error following the most recent update.
I cannot be sure that this problem is solved, because in the past it only occurred with some images. However, I tried to reproduce the previous workflow, and did not reproduce the error. So it looks like this part is solved.</pre>
    </div><div id="c11" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c11">Comment 11</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard">mone7979
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2015-01-31 10:32:31 CST
        </span>
      </div>



<pre class="bz_comment_text" >Hi everyone,

I encounter the exact same problem as Aryeh.

I just got the latest stable release of Fiji 2 days ago, and also updated again when the problem started.

I am running Fiji on a Windows 7 64-bit system. 
SCIFIO is by default turned off (I checked).

My macro is extremely simple, I just use the Color Deconvolution Plugin repeatedly for some 600 microscopy images (quite large, about 3000x4000).

// some directories are retrieved before
for(i = 0; i &lt; list.length; i++) 
{
	input = dir1+list[i];
	print(input);

	run(&quot;Open [Image IO]&quot;, &quot;image=[&quot;+input+&quot;]&quot;);
	run(&quot;Colour Deconvolution&quot;, &quot;vectors=[Embryo Anatomie II] hide&quot;);
		
	if(isOpen(4))
	{
		selectImage(4);
		run(&quot;RGB Color&quot;);
		saveAs(&quot;Tiff&quot;, dir2 + list[i]);
	}
			
	run(&quot;Close All&quot;);
}

What happens is the following:
for every image a directory named java########## (##### being some large number, as it was with Aryeh) is created in my temp directory, contents are further directories src, target, and a file (the culprit) pom.xml.
pom.xml starts with about 66kB, but DOUBLES for each image, reaching about 68 MB after 12 images. The execution time increases significantly, so that I have to process the images in chunks of about 10 images.
So apparently pom.xml is somehow internally reset after the macro finished (that's how I imagine it).

So it seems to me the problem was not yet solved. Or do you have any ideas? Thanks in advance.</pre>
    </div><div id="c12" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c12">Comment 12</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mark Hiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2015-02-02 09:21:48 CST
        </span>
      </div>



<pre class="bz_comment_text" >mone7979 - I was unable to reproduce this on my windows machine with the latest Fiji.

I tried running macros and the individual commands, with and without SCIFIO, and the only temporary file I saw pop up was a mapdb file (which SCIFIO does use) that was deleted appropriately when Fiji quit.

<span class="quote">&gt;I just got the latest stable release</span >

Can you clarify which download you used? Was it the &quot;Fiji continuous release&quot;? If not I would recommend trying that, or running Help &gt; Update Fiji.

If you're still seeing this problem with the latest Fiji, would you mind creating a minimal script (i.e. one that can be run anywhere without requiring modification - by using the sample images, for example) that causes this problem on your system?

Thank you!
- Mark

P.S. In addition to an up-to-date Fiji, let us know if you have any extra update sites or plugins installed. This info is reported in the Help &gt; Report a Bug dialog from Fiji.</pre>
    </div><div id="c13" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c13">Comment 13</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard">mone7979
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2015-02-03 05:46:24 CST
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class="bz_obsolete"><a href="../attach/229/file_906.txt" name="attach_229" title="Minimal example for error reproduction. Contains deconv.ijm macro and an image directory.">attachment 229</a></span>
Minimal example for error reproduction. Contains deconv.ijm macro and an image directory.</pre>
    </div><div id="c14" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c14">Comment 14</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard">mone7979
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2015-02-03 05:48:44 CST
        </span>
      </div>



<pre class="bz_comment_text" >Hi,

I forgot to mention that I used the .java/.class versions downloaded from the project website, as I had to add my own color vectors to the menu. Maybe that's the crucial part?

Anyhow, I again downloaded the Fiji Win32 continuous release version today, and put the .java/.class files from the colour deconvolution project website to the plugin directory.

For reproducing the error it is sufficient to just use the deconvolution with any of the color vectors, the test case is attatched. It contains the deconv.ijm macro, and a directory with 15 images. 

When running the macro, processing time starts to noticeably increase after about 10 images. Again, for every image a directory called javaXXXXXXX is created in my Temp directory, with increasing file size of pom.xml.

Hope you can reproduce the error now.

Thanks and have a nice day,
Simone</pre>
    </div><div id="c15" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c15">Comment 15</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Curtis Rueden</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2015-02-06 05:57:25 CST
        </span>
      </div>



<pre class="bz_comment_text" >Thanks mone7979. Unfortunately, it looks like the attachment you uploaded is somehow only a text file containing the description, rather than the ZIP file as intended.

However, I had an idea for a possible fix, which I would like you to test.

Please download this file:
  <a href="http://curtis.imagej.net/fiji-bug-906/scripting-java-0.2.6-SNAPSHOT.jar">http://curtis.imagej.net/fiji-bug-906/scripting-java-0.2.6-SNAPSHOT.jar</a>

Place it in your Fiji.app/jars directory, and delete the old scripting-java-0.2.5.jar.

Then start Fiji, try to reproduce the problem again using your workflow, and let us know how it goes.

If this change fixes the problem for you, we will release it to the ImageJ update site.

P.S. In case you're curious, the relevant code change (as pointed out by Johannes a while ago in this thread) is:

  <a href="https://github.com/scijava/scripting-java/compare/fix-tmp-proliferation">https://github.com/scijava/scripting-java/compare/fix-tmp-proliferation</a></pre>
    </div><div id="c16" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c16">Comment 16</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard">mone7979
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2015-02-11 15:04:33 CST
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class=""><a href="../attach/234/deconv.zip" name="attach_234" title="Minimal example for error reproduction. Contains deconv.ijm macro and an image directory.">attachment 234</a></span>
Minimal example for error reproduction. Contains deconv.ijm macro and an image directory.</pre>
    </div><div id="c17" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c17">Comment 17</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Curtis Rueden</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2015-02-11 15:17:16 CST
        </span>
      </div>



<pre class="bz_comment_text" >&#64;mone7979 Does the problem still occur with my updated scripting-java snapshot JAR?</pre>
    </div><div id="c18" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c18">Comment 18</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard">mone7979
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2015-02-11 15:19:22 CST
        </span>
      </div>



<pre class="bz_comment_text" >Hi,

sorry for the late answer, and thanks for you taking care of my problem. I followed your instructions, but unfortunately it still shows the same behavior.

I attatched the .zip file containing the minimal example, this time apparently correctly...

Hopefully you can reproduce the error. Otherwise I have no clue what to do. 

Regarding my task, I just applied the script like 60 times in chunks of about 10 images to do the color deconvolution of the whole data set. Probably I will not need this functionality any more. But still, apparently this error happens also for other people, so maybe my example can help to find the problem?

Another idea, did you try to reproduce the error with the colour-deconvolution .jar that comes when fiji is downloaded? Maybe it's something that only happens with the download-version of the project webpage, which I had to use since I had to adapt something in the source code.

Bye,
Simone</pre>
    </div><div id="c19" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c19">Comment 19</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Curtis Rueden</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2015-02-11 15:26:20 CST
        </span>
      </div>



<pre class="bz_comment_text" >Thanks for the quick follow-up.

<span class="quote">&gt; did you try to reproduce the error with the colour-deconvolution .jar
&gt; that comes when fiji is downloaded? Maybe it's something that only
&gt; happens with the download-version of the project webpage, which I had
&gt; to use since I had to adapt something in the source code.</span >

That theory makes sense. I did not test with the downloaded version. And I could not reproduce the issue with your example macro + files on my OS X system.

It would be very helpful if you could verify whether the problem still occurs on your system with the stock Colour Deconvolution JAR, rather than the modified version.

Alternately, you can use the File &gt; Make Fiji Package command to zip up your installation, and then upload that somewhere (e.g., Dropbox), which will increase our chances of being able to reproduce.</pre>
    </div><div id="c20" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c20">Comment 20</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard">mone7979
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2015-02-12 06:37:50 CST
        </span>
      </div>



<pre class="bz_comment_text" >So, my theory was correct, the error does not appear when I use the included version, only with the .class/.java version. 

I can for sure say that the problem was not caused by the modifications I made, since I just added an additional staining in the code, just another set of vectors. 

Probably fixing the error is then more a task for the original developers of the project?

Anyhow, thank you very much for your help. If you think some more input from me is necessary, I am happy to provide it.

Simone</pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>
        



</div>

</body>
</html>
