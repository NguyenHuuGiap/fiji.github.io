<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
  <head>
    <title>Bug 631 &ndash; Turning ImageJ into a Fiji installation does not work</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<link rel="Top" href="">

  


  
    
      

      
      



    
    <link href="../css/global.css"
          rel="alternate stylesheet" 
          title="Classic"><link href="../css/global.css" rel="stylesheet"
        type="text/css" ><link href="../css/bug.css" rel="stylesheet"
        type="text/css" >

    <link href="../css/dusk.css" rel="stylesheet"
        type="text/css" title="Dusk">

    

    

    


    


    

    
    
    
  </head>



  <body onload=""
        class=" bz_bug bz_status_RESOLVED bz_product_Fiji bz_component_Other bz_bug_631 yui-skin-sam">



<div id="header">
<div id="banner">
  </div>

<table border="0" cellspacing="0" cellpadding="0" id="titles">
<tr>
    <td id="title">
      <p>Bugzilla &ndash; Bug&nbsp;631</p>
    </td>

    <td id="subtitle">
      <p class="subheader">Turning ImageJ into a Fiji installation does not work</p>
    </td>

    <td id="information">
      <p class="header_addl_info">Last modified: 2013-07-22 16:40:09 CDT</p>
    </td>
</tr>
</table>


</div> 

<div id="notice">
  <table>
    <tr>
      <td style="font-size: 72px; color: firebrick; padding: 0 10px 0 10px">&#9888;</td>
      <td>
        <p style="margin: 0.4em">
        NOTICE! This is a static HTML version of a legacy Fiji BugZilla bug.
        </p>
        <p style="margin: 0.4em">
        The Fiji project now
        <a href="https://imagej.net/Issues">uses GitHub Issues</a> for issue tracking.
        </p>
        <p style="margin: 0.4em">
        Please
        <a href="https://github.com/fiji/fiji/issues/new">file all new issues</a>
        there.
        </p>
      </td>
    </tr>
  </table>
</div>

<div id="bugzilla-body">


<div class="bz_alias_short_desc_container edit_form">
     <a href="631.html"><b>Bug&nbsp;631</b></a> -<span id="summary_alias_container" class="bz_default_hidden"> 
      <span id="short_desc_nonedit_display">Turning ImageJ into a Fiji installation does not work</span>
     </span>
  
       
    <div id="summary_alias_input">
      <table id="summary"> 
        <tr>
            <td colspan="2">
          </td>
        </tr>
        
        <tr><th class="field_label "
    id="field_label_short_desc">

    <label for="short_desc" accesskey="s">

  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
  >Summary:</a>
</label>
</th>
          <td>Turning ImageJ into a Fiji installation does not work
          </td>
        </tr>
      </table>
    </div>
  </div>
  
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a>Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">RESOLVED
          FIXED
      </span>
    </td>
  </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components."
      class="field_help_link"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >Fiji</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Unclassified</td>
    </tr>
        
    
    
    <tr><th class="field_label "
    id="field_label_component">


  <a 
      title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list."
      class="field_help_link"
  >Component:</a>

</th>
  <td class="field_value "
      id="field_container_component" >Other</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_version">

    <label for="version">

  <a 
      title="The version field defines the version of the software the bug was found in."
      class="field_help_link"
  >Version:</a>
</label>
</th>
        <td>unspecified
  </td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">

    <label for="rep_platform" accesskey="h">

  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
  >Hardware:</a>
</label>
</th>
      <td class="field_value">PC
       Linux
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label for="priority" accesskey="i">
          <a><u>I</u>mportance</a></label>:
      </th>
      <td>P5
       normal
      </td>
    </tr>            
          
          <tr>
      <th class="field_label">
        <a>Assigned To</a>:
      </th>
      <td><span class="vcard"><span class="fn">ImageJ Bugs Mailing List</span>
</span>
      </td>
    </tr>

    
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">

    <label for="bug_file_loc" accesskey="u">

  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
  >URL:</a>
</label>
</th>
    <td>
      <span id="bz_url_input_area">
      </span>
    </td>
  </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>
    
  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>
    
  </td>
  </tr>
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table cellpadding="3" cellspacing="1">
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2013-07-11 09:27 CDT by <span class="vcard"><span class="fn">Vassilis Kehayas</span>
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2013-07-22 16:40 CDT 
    </td>
  
  </tr>
         <tr>
      <th class="field_label">
        <label for="newcc" accesskey="a">CC List:</label>
      </th>
      <td>2 
          users
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5">
                <option value="ctrueden">ctrueden</option>
                <option value="johannes.schindelin">johannes.schindelin</option>
            </select>
        </div>
          
      </td>
    </tr>
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" ></td>
    </tr> 
         
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
         
                

        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts" cellspacing="0" cellpadding="0"><tr>
  <td>

    



  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments">






<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table" cellpadding="0" cellspacing="0"><tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Vassilis Kehayas</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-07-11 09:27:31 CDT
        </span>
      </div>



<pre class="bz_comment_text" >When following the instructions in here:
<a href="http://fiji.sc/Frequently_Asked_Questions#How_do_I_turn_my_ImageJ_installation_into_a_Fiji_one.3F">http://fiji.sc/Frequently_Asked_Questions#How_do_I_turn_my_ImageJ_installation_into_a_Fiji_one.3F</a>,

I get the following error:
sun.org.mozilla.javascript.EcmaError: TypeError: Cannot call method &quot;getDirectory&quot; of undefined (&lt;Unknown source&gt;#63) in &lt;Unknown source&gt; at line number 63</pre>
    </div><div id="c1" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Schindelin</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-07-11 14:32:48 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Thanks for the report. I actually fixed this on a computer of some workshop participant in Woodshole early June but forgot to apply the same fix to the source code repository from where the link you found is actually fed.

This is fixed in <a href="https://github.com/fiji/fiji/commit/fa2bfe56">https://github.com/fiji/fiji/commit/fa2bfe56</a></pre>
    </div><div id="c2" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Vassilis Kehayas</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-07-12 06:24:34 CDT
        </span>
      </div>



<pre class="bz_comment_text" >The installation now run with no errors but the plugins that are expected to be associated with Fiji are still missing.</pre>
    </div><div id="c3" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Schindelin</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-07-12 09:02:14 CDT
        </span>
      </div>



<pre class="bz_comment_text" >When I drag &amp; drop the fix.js URL onto the ImageJ window, a text window appears with a Javascript and a comment in the beginning that asks me to start the Javascript with Ctrl+J (or Cmd+J on MacOSX).

Have you done that?

After that, the ImageJ window shows the statuses &quot;loading remote updater&quot; and &quot;starting remote updater&quot;, respectively. After a moment, the updater pops up, offering to install a bunch of files. I clicked &quot;Apply changes&quot; to let it do that.

Have you seen that, and also clicked that button?

After that, it downloaded a bunch of stuff and then showed me a message that everything is installed now and I need to restart ImageJ to make the changes permanent. One problem there is that you will need to start the new, unified ImageJ launcher that is installed by the updater unless your ImageJ already came with it (likely the latter is only the case if you installed the very recent 1.47 from the ImageJ 1.x website).

After the restart, I got the message about a couple of duplicated plugins (which I will fix later, I already filed a ticket to remind myself of that task).

In any case, the restart should show all the plugins (but some Fiji-specific things -- such as having the recorder open new macros in the script editor -- will only work if you start it with the new ImageJ launcher).</pre>
    </div><div id="c4" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Vassilis Kehayas</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-07-12 09:35:42 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Yes, I followed the same procedure. I had already ImageJ 1.47v, so I uninstalled and re-installed ImageJ, applying the fixer without updating to 1.47v and I still get the same issue.
Where is the new launcher located?
In a terminal I get this:

$ which imagej 
/usr/bin/imagej

This gives me a non-Fiji, vanilla ImageJ 1.46a.

Ubuntu 12.04LTS
java version &quot;1.6.0_27&quot;
OpenJDK Runtime Environment (IcedTea6 1.12.5) (6b27-1.12.5-0ubuntu0.12.04.1)
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode)</pre>
    </div><div id="c5" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Vassilis Kehayas</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-07-12 09:36:24 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Yes, I followed the same procedure. I had already ImageJ 1.47v, so I uninstalled and re-installed ImageJ, applying the fixer without updating to 1.47v and I still get the same issue.
Where is the new launcher located?
In a terminal I get this:

$ which imagej 
/usr/bin/imagej

This gives me a non-Fiji, vanilla ImageJ 1.46a.

Ubuntu 12.04LTS
java version &quot;1.6.0_27&quot;
OpenJDK Runtime Environment (IcedTea6 1.12.5) (6b27-1.12.5-0ubuntu0.12.04.1)
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode)</pre>
    </div><div id="c6" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Curtis Rueden</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-07-12 10:31:20 CDT
        </span>
      </div>



<pre class="bz_comment_text" >If your ImageJ is at &quot;/usr/bin/imagej&quot; then I am guessing you installed ImageJ via the package manager? I would be very surprised if it is possible to transform such an installation into a Fiji one, due to both permissions issues and directory structure layout incompatibilities.

The Fiji updater only works when it has permission to modify the Fiji directory -- in other words, if you own that directory. It is much easier to download and unpack Fiji into your home directory and run from there: <a href="http://fiji.sc/Downloads">http://fiji.sc/Downloads</a></pre>
    </div><div id="c7" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Vassilis Kehayas</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-07-12 10:55:46 CDT
        </span>
      </div>



<pre class="bz_comment_text" >I wanted Fiji to be associated with a file format by default and I don't know how to achieve this except installing from package.

Running the procedure with gksudo succeeds.

But now if I don't run ImageJ with gksudo (as when double-clicking a TIFF file, my initial purpose) it reverts to vanilla ImageJ, whereas it's Fiji with gksudo.

Thanks for your efforts anyway. I think I need to understand more about how linux deals with default applications to make Fiji from my home folder be associated with TIFFs.</pre>
    </div><div id="c8" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c8">Comment 8</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Curtis Rueden</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-07-12 12:28:03 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Maybe this article helps you?
<a href="http://ubuntutechnical.wordpress.com/2012/02/01/add-new-application-to-open-with-other-application/">http://ubuntutechnical.wordpress.com/2012/02/01/add-new-application-to-open-with-other-application/</a></pre>
    </div><div id="c9" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c9">Comment 9</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Vassilis Kehayas</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-07-12 13:31:53 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Thanks! I found a solution here:
<a href="http://askubuntu.com/questions/162612/how-can-i-add-an-application-to-the-list-of-open-with-applications">http://askubuntu.com/questions/162612/how-can-i-add-an-application-to-the-list-of-open-with-applications</a></pre>
    </div><div id="c10" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c10">Comment 10</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Schindelin</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-07-12 14:45:19 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Note that both the Fiji package you can download from <a href="http://fiji.sc/Downloads">http://fiji.sc/Downloads</a> and the ImageJ package you can download from <a href="http://imagej.nih.gov/ij/download.html">http://imagej.nih.gov/ij/download.html</a> (or for that matter, from <a href="http://jenkins.imagej.net/job/ImageJ1-releases/label=master/">http://jenkins.imagej.net/job/ImageJ1-releases/label=master/</a>) have an ImageJ launcher that will create a .desktop file as you require it when first started.</pre>
    </div><div id="c11" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c11">Comment 11</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Vassilis Kehayas</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-07-18 09:32:59 CDT
        </span>
      </div>



<pre class="bz_comment_text" >&#64;johannes.schindelin:Exactly, except I had to modify 'Exec=command' to 'Exec=command %F'</pre>
    </div><div id="c12" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c12">Comment 12</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Schindelin</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-07-22 16:40:09 CDT
        </span>
      </div>



<pre class="bz_comment_text" >I incorporated your ideas (which I could finally verify using the proper documentation -- read: not StackOverflow) into the launcher which will write appropriate .desktop files starting with the next released version.</pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>
        



</div>

</body>
</html>
