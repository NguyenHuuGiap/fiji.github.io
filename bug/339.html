<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
  <head>
    <title>Bug 339 &ndash; Fiji fails to compile after &quot;./Build.sh clean&quot;</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<link rel="Top" href="">

  


  
    
      

      
      



    
    <link href="../css/global.css"
          rel="alternate stylesheet" 
          title="Classic"><link href="../css/global.css" rel="stylesheet"
        type="text/css" ><link href="../css/bug.css" rel="stylesheet"
        type="text/css" >

    <link href="../css/dusk.css" rel="stylesheet"
        type="text/css" title="Dusk">

    

    

    


    


    

    
    
    
  </head>



  <body onload=""
        class=" bz_bug bz_status_RESOLVED bz_product_Fiji bz_component_Other bz_bug_339 yui-skin-sam">



<div id="header">
<div id="banner">
  </div>

<table border="0" cellspacing="0" cellpadding="0" id="titles">
<tr>
    <td id="title">
      <p>Bugzilla &ndash; Bug&nbsp;339</p>
    </td>

    <td id="subtitle">
      <p class="subheader">Fiji fails to compile after &quot;./Build.sh clean&quot;</p>
    </td>

    <td id="information">
      <p class="header_addl_info">Last modified: 2011-07-22 01:00:59 CDT</p>
    </td>
</tr>
</table>


</div> 

<div id="notice">
  <table>
    <tr>
      <td style="font-size: 72px; color: firebrick; padding: 0 10px 0 10px">&#9888;</td>
      <td>
        <p style="margin: 0.4em">
        NOTICE! This is a static HTML version of a legacy Fiji BugZilla bug.
        </p>
        <p style="margin: 0.4em">
        The Fiji project now
        <a href="https://imagej.net/Issues">uses GitHub Issues</a> for issue tracking.
        </p>
        <p style="margin: 0.4em">
        Please
        <a href="https://github.com/fiji/fiji/issues/new">file all new issues</a>
        there.
        </p>
      </td>
    </tr>
  </table>
</div>

<div id="bugzilla-body">


<div class="bz_alias_short_desc_container edit_form">
     <a href="339.html"><b>Bug&nbsp;339</b></a> -<span id="summary_alias_container" class="bz_default_hidden"> 
      <span id="short_desc_nonedit_display">Fiji fails to compile after &quot;./Build.sh clean&quot;</span>
     </span>
  
       
    <div id="summary_alias_input">
      <table id="summary"> 
        <tr>
            <td colspan="2">
          </td>
        </tr>
        
        <tr><th class="field_label "
    id="field_label_short_desc">

    <label for="short_desc" accesskey="s">

  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
  >Summary:</a>
</label>
</th>
          <td>Fiji fails to compile after &quot;./Build.sh clean&quot;
          </td>
        </tr>
      </table>
    </div>
  </div>
  
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a>Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">RESOLVED
          INVALID
      </span>
    </td>
  </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components."
      class="field_help_link"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >Fiji</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Unclassified</td>
    </tr>
        
    
    
    <tr><th class="field_label "
    id="field_label_component">


  <a 
      title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list."
      class="field_help_link"
  >Component:</a>

</th>
  <td class="field_value "
      id="field_container_component" >Other</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_version">

    <label for="version">

  <a 
      title="The version field defines the version of the software the bug was found in."
      class="field_help_link"
  >Version:</a>
</label>
</th>
        <td>unspecified
  </td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">

    <label for="rep_platform" accesskey="h">

  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
  >Hardware:</a>
</label>
</th>
      <td class="field_value">PC
       Linux
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label for="priority" accesskey="i">
          <a><u>I</u>mportance</a></label>:
      </th>
      <td>P2
       normal
      </td>
    </tr>            
          
          <tr>
      <th class="field_label">
        <a>Assigned To</a>:
      </th>
      <td><span class="vcard"><span class="fn">ImageJ Bugs Mailing List</span>
</span>
      </td>
    </tr>

    
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">

    <label for="bug_file_loc" accesskey="u">

  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
  >URL:</a>
</label>
</th>
    <td>
      <span id="bz_url_input_area">
      </span>
    </td>
  </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>
    
  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>
    
  </td>
  </tr>
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table cellpadding="3" cellspacing="1">
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2011-07-21 10:56 CDT by <span class="vcard"><span class="fn">Albert Cardona</span>
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2011-07-22 01:00 CDT 
    </td>
  
  </tr>
         <tr>
      <th class="field_label">
        <label for="newcc" accesskey="a">CC List:</label>
      </th>
      <td>0 
          users
        <div id="cc_edit_area">
          <br>
        </div>
      </td>
    </tr>
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" ></td>
    </tr> 
         
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
         
                

        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts" cellspacing="0" cellpadding="0"><tr>
  <td>

    



  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments">






<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table" cellpadding="0" cellspacing="0"><tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Albert Cardona</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-07-21 10:56:08 CDT
        </span>
      </div>



<pre class="bz_comment_text" >I checked out imglib and bioformats like:

git submodule update modules/bio-formats modules/imglib

.. and failed to build (see below).

When checking out the master branches of these two repositories, fiji also fails to compile.

The error:


Building jars/imglib-io.jar &lt;- plugins/loci_tools.jar jars/imglib....
Building in modules/imglib/
Building imglib-io.jar &lt;- imglib1/io/src/main/java/mpicbg/imglib/i...
./modules/imglib/imglib1/io/src/main/java/mpicbg/imglib/io/ImageOpener.java:42: cannot find symbol
symbol  : class PositiveFloat
location: package ome.xml.model.primitives
import ome.xml.model.primitives.PositiveFloat;
                               ^
./modules/imglib/imglib1/io/src/main/java/mpicbg/imglib/io/ImageOpener.java:417: cannot find symbol
symbol  : class PositiveFloat
location: class mpicbg.imglib.io.ImageOpener
			PositiveFloat cal;
			^
./modules/imglib/imglib1/io/src/main/java/mpicbg/imglib/io/LOCI.java:472: cannot find symbol
symbol  : method getValue()
location: class java.lang.Double
			float cal = retrieve.getPixelsPhysicalSizeX( 0 ).getValue().floatValue();
			                                                ^
./modules/imglib/imglib1/io/src/main/java/mpicbg/imglib/io/LOCI.java:483: cannot find symbol
symbol  : method getValue()
location: class java.lang.Double
				cal = retrieve.getPixelsPhysicalSizeY( 0 ).getValue().floatValue();
				                                          ^
./modules/imglib/imglib1/io/src/main/java/mpicbg/imglib/io/LOCI.java:494: cannot find symbol
symbol  : method getValue()
location: class java.lang.Double
				cal = retrieve.getPixelsPhysicalSizeZ( 0 ).getValue().floatValue();
				                                          ^
5 errors
Fake failed: Compile error
	in rule imglib-io.jar &lt;- imglib1/io/src/main/java/mpicbg/imglib/i...
	in rule jars/imglib-io.jar &lt;- plugins/loci_tools.jar jars/imglib....
	in rule plugins/SPIM_Registration.jar &lt;- src-plugins/SPIM_Registr...
	in rule all &lt;- fiji jars/ij.jar misc/headless.jar plugins/loci_to...</pre>
    </div><div id="c1" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Albert Cardona</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-07-21 11:00:44 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Additionally, the Scripting_.jar has the same problem as the imglib-io.jar:

Building plugins/Stitching_.jar &lt;- src-plugins/Stitching_/stitchin...
src-plugins/Stitching_/Stitch_Multiple_Series_File.java:231: cannot find symbol
symbol  : method getValue()
location: class java.lang.Double
					cal = retrieve.getPixelsPhysicalSizeX( 0 ).getValue();
					                                          ^
src-plugins/Stitching_/Stitch_Multiple_Series_File.java:238: cannot find symbol
symbol  : method getValue()
location: class java.lang.Double
					cal = retrieve.getPixelsPhysicalSizeY( 0 ).getValue();
					                                          ^
src-plugins/Stitching_/Stitch_Multiple_Series_File.java:245: cannot find symbol
symbol  : method getValue()
location: class java.lang.Double
					cal = retrieve.getPixelsPhysicalSizeZ( 0 ).getValue();
					                                          ^
Note: Some input files use or override a deprecated API.
Note: Recompile with -Xlint:deprecation for details.
3 errors
Compile error
	in rule plugins/Stitching_.jar &lt;- src-plugins/Stitching_/stitchin...
	in rule plugins/Trainable_Segmentation.jar &lt;- src-plugins/Trainab...
	in rule all &lt;- fiji jars/ij.jar misc/headless.jar plugins/loci_to...</pre>
    </div><div id="c2" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Albert Cardona</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-07-21 11:06:09 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Finally, checking out the master branch of modules/bio-formats and rebuilding the loci_tools.jar like this:

./Build.sh plugins/loci_tools.jar-rebuild

... and then building again:

./Build.sh

... solved the compilation problem.

I cannot understand how this is different that what I originally did: pull and checkout the master branch of imglib, bio-formats, ImageJA, mpicbg and TrakEM2, and then run a ./Build.sh clean and a ./Build.sh.</pre>
    </div><div id="c3" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Schindelin</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-07-21 12:33:42 CDT
        </span>
      </div>



<pre class="bz_comment_text" >I vaguely remember that there was a recent update in the Bio-Formats submodule, but I did not have problems with compiling, so I did not check whether the precompiled/uploaded/committed versions of all involved components work together well...</pre>
    </div><div id="c4" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Curtis Rueden</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-07-21 15:27:18 CDT
        </span>
      </div>



<pre class="bz_comment_text" >As Johannes says, I recently updated the Bio-Formats submodule:
  <a href="http://pacific.mpi-cbg.de/cgi-bin/gitweb.cgi?p=fiji.git;a=commit;h=25d8637c48932a9a95921d568d47e789781379ca">http://pacific.mpi-cbg.de/cgi-bin/gitweb.cgi?p=fiji.git;a=commit;h=25d8637c48932a9a95921d568d47e789781379ca</a>

But I did not update precompiled/loci_tools.jar. Could that be the cause?</pre>
    </div><div id="c5" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Schindelin</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-07-21 18:01:58 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Curtis: only if the PositiveFloat was introduced since I committed precompiled/loci_tools.jar last. Let me see.

Clicketyclick.

No, it should be fine... Chris introduced the PositiveFloat class in 5abf3e0 on May 18 2011, but the latest precompiled loci_tools.jar is from de73a66 from June 5 2011.

Clicketyclick.

And the loci_tools.jar I committed into precompiled/ also has that class. I fear it is something with the dependencies (loci_tools.jar might not have been &quot;built&quot;, but since Albert did not have a look at plugins/loci_tools.jar -- or whether it was there to begin with -- I am afraid that we will not find out now).

I am less worried because Jenkins actually succeeded just fine to build everything from scratch (with all submodules checked out). I should probably add a stage where all the submodules are emptied, git clean is called, and everything builds again, to make sure that the bare build (only with precompiled stuff) works. Will do so as I find time.</pre>
    </div><div id="c6" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Curtis Rueden</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-07-21 23:50:42 CDT
        </span>
      </div>



<pre class="bz_comment_text" >For Jenkins, I recommend we create a second job of &quot;Fiji-basic&quot; or some such, which builds without any submodules checked out. It will be easier to maintain two workspaces than one that bounces back and forth.</pre>
    </div><div id="c7" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Schindelin</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-07-22 01:00:59 CDT
        </span>
      </div>



<pre class="bz_comment_text" >That's how we did things on pacific (which is much snappier now that the nightly build was moved to Wisconsin, thank you!). But I could not really find out how to make Jenkins _not_ check out all submodules :-)</pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>
        



</div>

</body>
</html>
