<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
  <head>
    <title>Bug 1266 &ndash; 'path' is required but is unset</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<link rel="Top" href="">

  


  
    
      

      
      



    
    <link href="../css/global.css"
          rel="alternate stylesheet" 
          title="Classic"><link href="../css/global.css" rel="stylesheet"
        type="text/css" ><link href="../css/bug.css" rel="stylesheet"
        type="text/css" >

    <link href="../css/dusk.css" rel="stylesheet"
        type="text/css" title="Dusk">

    

    

    


    


    

    
    
    
  </head>



  <body onload=""
        class=" bz_bug bz_status_RESOLVED bz_product_Fiji bz_component_Plugins bz_bug_1266 yui-skin-sam">



<div id="header">
<div id="banner">
  </div>

<table border="0" cellspacing="0" cellpadding="0" id="titles">
<tr>
    <td id="title">
      <p>Bugzilla &ndash; Bug&nbsp;1266</p>
    </td>

    <td id="subtitle">
      <p class="subheader">'path' is required but is unset</p>
    </td>

    <td id="information">
      <p class="header_addl_info">Last modified: 2016-05-03 10:40:08 CDT</p>
    </td>
</tr>
</table>


</div> 

<div id="notice">
  <table>
    <tr>
      <td style="font-size: 72px; color: firebrick; padding: 0 10px 0 10px">&#9888;</td>
      <td>
        <p style="margin: 0.4em">
        NOTICE! This is a static HTML version of a legacy Fiji BugZilla bug.
        </p>
        <p style="margin: 0.4em">
        The Fiji project now
        <a href="https://imagej.net/Issues">uses GitHub Issues</a> for issue tracking.
        </p>
        <p style="margin: 0.4em">
        Please
        <a href="https://github.com/fiji/fiji/issues/new">file all new issues</a>
        there.
        </p>
      </td>
    </tr>
  </table>
</div>

<div id="bugzilla-body">


<div class="bz_alias_short_desc_container edit_form">
     <a href="1266.html"><b>Bug&nbsp;1266</b></a> -<span id="summary_alias_container" class="bz_default_hidden"> 
      <span id="short_desc_nonedit_display">'path' is required but is unset</span>
     </span>
  
       
    <div id="summary_alias_input">
      <table id="summary"> 
        <tr>
            <td colspan="2">
          </td>
        </tr>
        
        <tr><th class="field_label "
    id="field_label_short_desc">

    <label for="short_desc" accesskey="s">

  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
  >Summary:</a>
</label>
</th>
          <td>'path' is required but is unset
          </td>
        </tr>
      </table>
    </div>
  </div>
  
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a>Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">RESOLVED
          FIXED
      </span>
    </td>
  </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components."
      class="field_help_link"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >Fiji</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Unclassified</td>
    </tr>
        
    
    
    <tr><th class="field_label "
    id="field_label_component">


  <a 
      title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list."
      class="field_help_link"
  >Component:</a>

</th>
  <td class="field_value "
      id="field_container_component" >Plugins</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_version">

    <label for="version">

  <a 
      title="The version field defines the version of the software the bug was found in."
      class="field_help_link"
  >Version:</a>
</label>
</th>
        <td>unspecified
  </td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">

    <label for="rep_platform" accesskey="h">

  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
  >Hardware:</a>
</label>
</th>
      <td class="field_value">PC
       Windows
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label for="priority" accesskey="i">
          <a><u>I</u>mportance</a></label>:
      </th>
      <td>P4
       normal
      </td>
    </tr>            
          
          <tr>
      <th class="field_label">
        <a>Assigned To</a>:
      </th>
      <td><span class="vcard"><span class="fn">ImageJ Bugs Mailing List</span>
</span>
      </td>
    </tr>

    
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">

    <label for="bug_file_loc" accesskey="u">

  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
  >URL:</a>
</label>
</th>
    <td>
      <span id="bz_url_input_area">
      </span>
    </td>
  </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>
    
  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>
    
  </td>
  </tr>
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table cellpadding="3" cellspacing="1">
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2016-05-02 15:41 CDT by <span class="vcard">awoaks
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2016-05-03 10:40 CDT 
    </td>
  
  </tr>
         <tr>
      <th class="field_label">
        <label for="newcc" accesskey="a">CC List:</label>
      </th>
      <td>3 
          users
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5">
                <option value="awoaks">awoaks</option>
                <option value="ctrueden">ctrueden</option>
                <option value="wsr">wsr</option>
            </select>
        </div>
          
      </td>
    </tr>
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" ></td>
    </tr> 
         
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
         
                

        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts" cellspacing="0" cellpadding="0"><tr>
  <td>

    



  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments">






<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table" cellpadding="0" cellspacing="0"><tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard">awoaks
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2016-05-02 15:41:27 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Run any macro that gives an error and has to stop.

For example, just run this with no image open:

title=getTitle();

Then try to open an image from the File:Open... (or Ctrl + O).

Always get:

'path' is required but is unset

And have to restart ImageJ to continue working

Information about your version of Java:

  os.arch =&gt; amd64
  os.name =&gt; Windows 7
  os.version =&gt; 6.1
  java.version =&gt; 1.6.0_24
  java.vendor =&gt; Sun Microsystems Inc.
  java.runtime.name =&gt; Java(TM) SE Runtime Environment
  java.runtime.version =&gt; 1.6.0_24-b07
  java.vm.name =&gt; Java HotSpot(TM) 64-Bit Server VM
  java.vm.version =&gt; 19.1-b02
  java.vm.vendor =&gt; Sun Microsystems Inc.
  java.vm.info =&gt; mixed mode
  java.awt.graphicsenv =&gt; sun.awt.Win32GraphicsEnvironment
  java.specification.name =&gt; Java Platform API Specification
  java.specification.version =&gt; 1.6
  sun.cpu.endian =&gt; little
  sun.desktop =&gt; windows
  file.separator =&gt; \

The up-to-date check says: REMIND_LATER

Information relevant to JAVA_HOME related problems:

  JAVA_HOME is set to: C:\Fiji.app/java/win64/jdk1.6.0_24//jre
  imagej.dir =&gt; C:\Fiji.app

Information about the version of each plugin:

Activated update sites:
ImageJ: <a href="http://update.imagej.net/">http://update.imagej.net/</a> (last check:20160422185140)
Fiji: <a href="http://update.fiji.sc/">http://update.fiji.sc/</a> (last check:20160418112001)

Files not up-to-date:
  1ad3be0d (LOCAL_ONLY) 20140419230050 jars/jpedalSTD.jar
  f89825ee (LOCAL_ONLY) 20160330162635 macros/EeveemeasureLOOPE.ijm
  41da7477 (LOCAL_ONLY) 20160422115144 macros/EeveemeasureLOOPED_noBLEACH.ijm
  80cbbced (LOCAL_ONLY) 20160330115307 macros/EeveemeasureWORKIN.ijm
  95c8916b (LOCAL_ONLY) 20141203192213 macros/Golgi2Dstitcher.ijm
  c6a8dcd3 (LOCAL_ONLY) 20150223143131 macros/INVER.txt
  8a117860 (LOCAL_ONLY) 20140612174341 macros/LICORcomposit.txt
  116b0c07 (MODIFIED) 20151009134850 macros/StartupMacros.fiji.ijm
  4c8abbd5 (LOCAL_ONLY) 20150424183418 macros/TFpuncta.ijm
  e9876ace (LOCAL_ONLY) 20150414191927 macros/TfRpuncta.ijm
  4b553741 (LOCAL_ONLY) 20160403214911 macros/Velocity_Measurement_Tool.txt
  7c2c6ffa (LOCAL_ONLY) 20160403174021 macros/boxmaker.ijm
  78c1e5b2 (LOCAL_ONLY) 20160403181936 macros/boxmaker2.ijm
  f7436389 (LOCAL_ONLY) 20151009170833 macros/cDKOcellcounterprep.ijm
  256a19a3 (LOCAL_ONLY) 20150916155649 macros/cDKOpunct.ijm
  7306544e (LOCAL_ONLY) 20151006123315 macros/cDKOpunctaEEA1.ijm
  63789bfd (LOCAL_ONLY) 20151007173639 macros/cDKOpunctaTF.ijm
  5a05cf78 (LOCAL_ONLY) 20160403181927 macros/kymographerPLUSboxmaker2WIP.ijm
  76212b1a (LOCAL_ONLY) 20160502160542 macros/kymographerPLUSboxmaker3_0_WIP.ijm
  a3778679 (LOCAL_ONLY) 20160403174512 macros/kymographerPLUSboxmakerWIP.ijm
  8be68ae4 (LOCAL_ONLY) 20160401155749 macros/kymographerWIP.ijm
  ad04dd35 (LOCAL_ONLY) 20160502162541 macros/kymographer_simplified_0_0_WIP.ijm
  4e8963ae (LOCAL_ONLY) 20160404174721 macros/kymoveloc_0.1.ijm
  25f2121b (LOCAL_ONLY) 20150526120602 macros/liveTFRfile.ijm
  ff910981 (LOCAL_ONLY) 20160502161456 macros/matrix.txt
  e2a4b06b (LOCAL_ONLY) 20151209163256 macros/nucleicountChannel1.ijm
  35de98f2 (LOCAL_ONLY) 20160209134336 macros/nucleicountChannel1working.ijm
  30f922fa (LOCAL_ONLY) 20160209144948 macros/pCREBscoring.ijm
  227d0d6b (LOCAL_ONLY) 20150914121858 macros/puncta3of4.ijm
  8a4c571d (LOCAL_ONLY) 20150502151726 macros/rab5COUNTER.ijm
  7bb90630 (LOCAL_ONLY) 20160419175305 macros/recordAPFRETtest.ijm
  035cbed3 (LOCAL_ONLY) 20160426112441 macros/register_lambdastacks_quickmacro.ijm
  9492b812 (LOCAL_ONLY) 20150728141642 macros/sliceremover.ijm
  24b8881d (LOCAL_ONLY) 20150728141657 macros/sliceremover.txt
  7a6bce6c (LOCAL_ONLY) 20150728174208 macros/splittricolorgreen.ijm
  8564ce26 (LOCAL_ONLY) 20140603164702 macros/stackSplitter.ijm
  257886db (LOCAL_ONLY) 20150527185219 macros/tfuptakecellvolume.ijm
  653432dd (LOCAL_ONLY) 20160403214014 macros/tsp050706.txt
  d9b54764 (LOCAL_ONLY) 20160403214112 plugins/Macros/tsp050706.ijm
  3589dfdf (LOCAL_ONLY) 20160302091613 plugins/MultiStackReg1.45_.jar
  db475fbc (LOCAL_ONLY) 20150527165049 plugins/Voxel_Counter.class
  b2afde18 (LOCAL_ONLY) 20151009132108 plugins/cell_counter.jar</pre>
    </div><div id="c1" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Curtis Rueden</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2016-05-02 16:29:25 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Thanks for the bug report! That's a nasty one.

This specific bug only occurs when the &quot;Use SCIFIO when opening files (BETA!)&quot; option of Edit &gt; Options &gt; ImageJ2... is checked.

However, with that option unchecked, there is still a fatal bug: ImageJ2 commands do not run after a macro is canceled. So if you run e.g. the macro you posted, then try running Edit &gt; Options &gt; ImageJ2... itself, nothing will happen henceforth, until the program is restarted.

Both of these behaviors stem from the same root cause, which is related to cancelation of ImageJ commands internally. I am investigating how best to fix now.</pre>
    </div><div id="c2" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Curtis Rueden</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2016-05-02 16:50:10 CDT
        </span>
      </div>



<pre class="bz_comment_text" >More technical details on the cause:

After running a macro which errors out, the IJ.isMacro() method still returns true, because Interpreter.getInstance() is still non-null (i.e.: the interpreter does not get cleaned up). This causes later code to assume a macro is currently running and hence behave differently.

You can clear the problematic condition by executing any macro which completes successfully; e.g.:

    showMessage(&quot;Back to normal!&quot;);

Subsequently, ImageJ2 commands will work again, since this resets the interpreter back to null -- at least until the next macro which errors out.

Still investigating to determine the best way to fix this in general.</pre>
    </div><div id="c3" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Wayne Rasband</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2016-05-02 20:16:10 CDT
        </span>
      </div>



<pre class="bz_comment_text" >The latest ImageJ daily build (1.51a16) fixes a bug that sometimes caused macros to not be correctly terminated when an error occurred. You should be able to avoid the &quot;'path' is required but is unset&quot; error by using the Help&gt;Upgrade ImageJ command to upgrade to the daily build.</pre>
    </div><div id="c4" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Curtis Rueden</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2016-05-03 07:36:59 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Thanks Wayne. I looked into adding a fix on the ImageJ2 side as well. But after digging in the code, I concluded that doing so would introduce other unintended side effects.</pre>
    </div><div id="c5" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard">awoaks
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2016-05-03 09:59:11 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Updating to daily build 1.51a19 did not fix this problem for me.

I am still getting the same error ('path' is required but is unset) when I try to use File-&gt;Open... after running a macro that does not complete successfully</pre>
    </div><div id="c6" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard">awoaks
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2016-05-03 10:12:03 CDT
        </span>
      </div>



<pre class="bz_comment_text" >And now when I step back to 1.50i the bug has mysteriously disappeared.

I will pop back in here with an update if it re-emerges.</pre>
    </div><div id="c7" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Curtis Rueden</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2016-05-03 10:40:08 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Upon further reflection and discussion, we decided to include a fix on the ImageJ2 side as well:

<a href="https://github.com/imagej/imagej-legacy/commit/64870767c7cee1fbfd5b37722d4641581e25d650">https://github.com/imagej/imagej-legacy/commit/64870767c7cee1fbfd5b37722d4641581e25d650</a>

This is redundant with the ImageJ 1.x fix, but will prevent this problem from occurring even with older versions of ImageJ 1.x, as long as the version of ImageJ2 components is new enough.</pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>
        



</div>

</body>
</html>
